angular.module("goApp",["ui.router","ngAnimate","angular-stripe"]).config(["$stateProvider","$urlRouterProvider","stripeProvider",function(t,e,r){r.setPublishableKey("pk_test_Y8LhLNUJyD0m1Zthhv3Q1ijz"),e.otherwise("/"),t.state("home",{templateUrl:"./views/home.html",controller:"homeCtrl",url:"/"}).state("loggin",{templateUrl:"./views/loggin.html",controller:"logginCtrl",url:"/loggin"}).state("cameras",{templateUrl:"./views/cameras.html",controller:"camerasCtrl",url:"/cameras"}).state("drones",{templateUrl:"./views/drones.html",controller:"dronesCtrl",url:"/drones"}).state("apparel",{templateUrl:"./views/apparel.html",controller:"apparelCtrl",url:"/apparel",resolve:{products:["mainService",function(t){return t.getItems().then(function(t){return t})}]}}).state("apparelProduct",{templateUrl:"./views/apparelProduct.html",controller:"apparelProductCtrl",url:"/apparel/:id/:gender"}).state("cart",{templateUrl:"./views/cart.html",controller:"cartCtrl",url:"/cart"}).state("checkout",{templateUrl:"./views/checkout.html",controller:"checkoutCtrl",url:"/checkout"})}]),angular.module("goApp").controller("apparelCtrl",["$scope","mainService","products",function(t,e,r){t.products=r,console.log(r),t.gender="Male",t.productFilter=function(e){return(e.gender===t.gender||"NULL"===e.gender)&&e}}]),angular.module("goApp").controller("apparelProductCtrl",["$scope","apparelProductService","$stateParams","$timeout",function(t,e,r,o){var n=r.id,a=r.gender;console.log(n+" "+a),t.thumbs=[],t.productImg={},o(function(){console.log(t.productImg+" we've got this")},100),t.getProduct=function(){e.getProduct(r.id,r.gender).then(function(e){t.product=e[0],t.productImg=e[0].img_url,console.log(t.productImg+" I AM IMAGE")})},t.getProduct(),t.imgSwitch=function(e){t.selectedImage=e},t.getThumbs=function(){e.getThumbs(r.id,r.gender).then(function(e){console.log("i wanna see if getting anything back",e),t.images=e;for(var r=0;r<e.length;r++)t.thumbs.push(e[r].img_url);t.selectedImage=t.thumbs[0],console.log("this is $scope.thumbs",t.thumbs)})},t.getThumbs(),t.getColorSwatches=function(){e.getColorSwatches(r.id).then(function(e){console.log("can i get a",e),t.colorSwatches=e})},t.getColorSwatches()}]),angular.module("goApp").service("apparelProductService",["$http",function(t){this.getProduct=function(e){return t({method:"GET",url:"/api/getProduct/"+e}).then(function(t){return t.data})},this.getThumbs=function(e,r){return t({method:"GET",url:"/api/getThumbs/"+e+"/"+r}).then(function(t){return t.data})},this.getColorSwatches=function(e){return t({method:"GET",url:"/api/getColorSwatches/"+e}).then(function(t){return t.data})}}]),angular.module("goApp").controller("camerasCtrl",["$scope",function(t){t.test="Cameras CTRL works",t.currentState="cameras"}]),angular.module("goApp").controller("cartCtrl",["$scope","cartService",function(t,e){t.values=[1,2,3,4,5,6,7,8,9,10]}]),angular.module("goApp").service("cartService",function(){}),angular.module("goApp").controller("checkoutCtrl",["$scope","checkoutService","stripe","$state",function(t,e,r,o){t.stepOneFinished=!1,t.stepTwoFinished=!1,t.stepTwoActive=!1,t.deliveryAddress={},t.billingAddress={},t.payment={},t.clearStepOne=function(e){t.stepOneFinished=!0;for(var r=document.getElementById("delivery_address"),o=document.getElementById("shipping_address"),n=0;n<r.length;n++)t.deliveryAddress[r.elements[n].name]=r.elements[n].value;if(e===!0){for(var n=0;n<r.length;n++)o[n].value=r[n].value;return void t.clearStepTwo()}t.stepTwoActive=!0},t.clearStepTwo=function(){t.stepTwoFinished=!0;for(var e=document.getElementById("shipping_address"),r=0;r<e.length;r++)t.billingAddress[e.elements[r].name]=e.elements[r].value;t.stepTwoActive=!1},t.editOne=function(){t.stepOneFinished=!1,t.stepTwoFinished=!1,t.stepTwoActive=!1},t.editTwo=function(){t.stepOneFinished=!0,t.stepTwoFinished=!1,t.stepTwoActive=!0},t.payment={},t.charge=function(){return r.card.createToken(t.payment.card).then(function(r){var o=angular.copy(t.payment);o.card=void 0,o.token=r.id,e.processPayment(100*t.total,o)}).then(function(e){swal({title:"Thank You!",text:"Your order will be shipped within 3 business days.",imageUrl:"http://www.sv411.com/wp-content/uploads/GoPro-Logo.jpg",confirmButtonText:"Continue exporing GoBro"}),t.zeroOut(),o.go("home")}).catch(function(t){t.type&&/^Stripe/.test(t.type)?console.log("Stripe error: ",t.message):console.log("Other error occurred, possibly with your API",t.message)})}}]),angular.module("goApp").service("checkoutService",["$http",function(t){this.processPayment=function(e,r){return t({method:"POST",url:"/api/payment",data:{amount:e,payment:r}})}}]),angular.module("goApp").controller("dronesCtrl",["$scope",function(t){t.test="drones CTRL works"}]),angular.module("goApp").controller("homeCtrl",["$scope",function(t){t.test="Home CTRL works",t.currentState="home",t.showVid=!1}]),angular.module("goApp").service("authService",["$http",function(t){this.login=function(e){return t({method:"POST",url:"/api/login",data:e}).then(function(t){return t})},this.logout=function(){return t({method:"GET",url:"/api/logout"}).then(function(t){return t})},this.getCurrentUser=function(){return t({method:"GET",url:"/api/me"}).then(function(t){return t})},this.registerUser=function(e){return console.log("authService",e),t({method:"POST",url:"/api/register",data:e}).then(function(t){return t})},this.editUser=function(e,r){return t({method:"PUT",url:"/api/user/"+e,data:r}).then(function(t){return t})}}]),angular.module("goApp").service("localStorageServ",["$http",function(t){this.store=function(t,e){return localStorage.setItem(t,JSON.stringify(e)),"saved"},this.get=function(t){var e=localStorage.getItem(t);return JSON.parse(e)}}]),angular.module("goApp").controller("logginCtrl",["$scope","authService","$state",function(t,e,r){t.test="Loggin CTRL works",t.login=function(o){console.log("stephen"),e.login(o).then(function(e){e.data?r.go("profile"):(alert("User does not exist"),t.user.password="")}).catch(function(t){alert("Unable to login")})},t.register=function(r){e.registerUser(r).then(function(e){console.log("loginCtrl",r),e.data?(alert("User Created"),t.newUser={}):alert("Unable to create user1")}).catch(function(t){alert("Unable to create user2")})}}]),angular.module("goApp").service("userService",["$http",function(t){this.getUsers=function(){return t({method:"GET",url:"/user"}).then(function(t){return t})},this.getUser=function(e){return t({method:"GET",url:"/user?_id="+e}).then(function(t){return t})}}]),angular.module("goApp").directive("banner",function(){return{restrict:"E",templateUrl:"./views/bannerDir.html",scope:{state:"=",products:"=",subtot:"=",incart:"="},controller:["$scope",function(t){t.hoverShop=!1,t.hoverWatch=!1,t.cartShow=!1}]}}),angular.module("goApp").directive("footer",function(){return{restrict:"E",templateUrl:"./views/footerDir.html",scope:{item:"="},controller:["$scope",function(t){}]}}),angular.module("goApp").controller("mainCtrl",["$scope","$state","$timeout","$rootScope","mainService",function(t,e,r,o,n){t.stateName,t.cart=[],t.subTotal=0,t.items=0,t.shipping=18,t.total=18,t.zeroOut=function(){t.cart=[],t.subTotal=0,t.items=0,t.total=0},t.addToCart=function(e,r,o){n.getItem(e,r,o).then(function(e){t.cart=n.checkDouble(t.cart,e),console.log(t.cart),t.subTotal=n.getSubTotal(t.cart),t.items=n.getNumOfItems(t.cart),t.total=parseInt(t.shipping)+parseInt(t.subTotal)})},t.removeFromCart=function(e){t.cart=n.removeItem(t.cart,e),t.subTotal=n.getSubTotal(t.cart),t.items=n.getNumOfItems(t.cart),t.total=parseInt(t.shipping)+parseInt(t.subTotal)},t.updateTotal=function(){t.subTotal=n.getSubTotal(t.cart),t.items=n.getNumOfItems(t.cart),t.total=parseInt(t.shipping)+parseInt(t.subTotal)},o.$on("$stateChangeStart",function(o,n,a,u,l){r(function(){t.stateName=e.current.name},100)})}]),angular.module("goApp").service("mainService",["$http",function(t){this.getItem=function(e,r,o){return t({method:"GET",url:"/api/getItem/"+e}).then(function(t){return t.data[0].count=r,"null"!==o&&(t.data[0].size=o),t.data[0]})},this.checkDouble=function(t,e){for(var r=0;r<t.length;r++)if(t[r].id===e.id)return t[r].count++,t;return t.push(e),t},this.getSubTotal=function(t){for(var e=0,r=0;r<t.length;r++)e+=parseFloat(t[r].count)*parseFloat(t[r].price);return e},this.getNumOfItems=function(t){for(var e=0,r=0;r<t.length;r++)e+=parseInt(t[r].count);return e},this.removeItem=function(t,e){for(var r=0;r<t.length;r++)if(t[r].id===e)return t.splice(r,1),t},this.getItems=function(){return t({method:"GET",url:"/api/getItems"}).then(function(t){return t.data})}}]);